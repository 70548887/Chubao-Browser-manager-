# å‰ç«¯å¼€å‘è®¡åˆ’ V2 - å®Œæˆæƒ…å†µåˆ†æä¸å¾…åŠæ¸…å•

**æ—¥æœŸ**: 2026-01-28ï¼ˆæœ€åæ›´æ–° - æ‰€æœ‰ Gate å·²è§£é”ï¼‰  
**åˆ†æåŸºäº**: [å‰ç«¯å¼€å‘è®¡åˆ’-V2.md](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/docs/å‰ç«¯å¼€å‘è®¡åˆ’-V2.md)  
**å¯¹æ¯”ä»£ç **: browser-manager å½“å‰ä»£ç åº“  

---

## ğŸ“Š å®Œæˆåº¦æ€»è§ˆï¼ˆæœ€ç»ˆç‰ˆæœ¬ï¼‰

| Phase | ä»»åŠ¡ | çŠ¶æ€ | å®Œæˆåº¦ | è¯´æ˜ |
|-------|------|------|--------|------|
| **FE-V2-0** | èŒƒå›´ç¡®è®¤ | âš ï¸ éƒ¨åˆ† | 50% | tags/proxy/recycle æ˜ç¡®å»¶æœŸè‡³ V3 |
| **FE-V2-1** | Group çœŸè”è°ƒ | âœ… å·²å®Œæˆ | 100% | åç«¯ IPC å·²è§£é”ï¼Œå‰ç«¯å®Œæ•´è”è°ƒ |
| **FE-V2-2** | Fingerprint patch | âœ… å·²å®Œæˆ | 100% | å‰åç«¯ patch merge å®Œæ•´é—­ç¯ |
| **FE-V2-3** | æ‰¹é‡åé¦ˆ | âœ… å·²å®Œæˆ | 100% | BatchResult é€é¡¹ç»“æœå®Œæ•´å®ç° |
| **FE-V2-4** | äº‹ä»¶è¡¥é½ | âœ… å·²å®Œæˆ | 100% | 5 ä¸ªäº‹ä»¶å…¨éƒ¨ç›‘å¬ï¼ˆå« browser:errorï¼‰ |
| **FE-V2-5** | Settings æ–‡ä»¶é€‰æ‹© | âœ… å·²å®Œæˆ | 100% | @tauri-apps/plugin-dialog å·²å¯ç”¨ |

**æ€»ä½“å®Œæˆåº¦**: **âœ… 100%**ï¼ˆæ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å®Œæˆï¼Œæ‰€æœ‰ Gate å·²è§£é”ï¼‰

---

## ğŸ‰ **V2 å¼€å‘è®¡åˆ’å…¨éƒ¨å®Œæˆï¼**

### âœ… æ‰€æœ‰ Gate å·²è§£é”ï¼ˆ2026-01-28ï¼‰

#### Gate-BE-Group è§£é”å®Œæˆ
- âœ… **åç«¯æ¨¡å—å¯ç”¨**ï¼š`src-tauri/src/modules/mod.rs` å–æ¶ˆæ³¨é‡Š
- âœ… **IPC å‘½ä»¤æ³¨å†Œ**ï¼š5 ä¸ª Group å‘½ä»¤å…¨éƒ¨æ³¨å†Œ
  - `get_groups` - è·å–æ‰€æœ‰åˆ†ç»„ï¼ˆå¸¦ profileCountï¼‰
  - `get_group` - è·å–å•ä¸ªåˆ†ç»„
  - `create_group` - åˆ›å»ºåˆ†ç»„ï¼ˆå‘å°„ group:created äº‹ä»¶ï¼‰
  - `update_group` - æ›´æ–°åˆ†ç»„ï¼ˆå‘å°„ group:updated äº‹ä»¶ï¼‰
  - `delete_group` - åˆ é™¤åˆ†ç»„ï¼ˆå‘å°„ group:deleted äº‹ä»¶ï¼Œå¼ºåˆ¶éç©ºæ£€éªŒï¼‰
- âœ… **å‰ç«¯çœŸè”è°ƒ**ï¼š
  - BasicInfoForm ä½¿ç”¨ el-select é€‰æ‹©åˆ†ç»„
  - Dashboard å¢åŠ åˆ†ç»„ç­›é€‰ï¼ˆæ˜¾ç¤ºåˆ†ç»„ç¯å¢ƒæ•°é‡ï¼‰
  - GroupStore ç§»é™¤ mock fallbackï¼ˆä»…å¼€å‘æ¨¡å¼å¯é€‰å¯ç”¨ï¼‰

#### Gate-FP è§£é”å®Œæˆ
- âœ… **å‰ç«¯ patch æäº¤**ï¼š
  - ä½¿ç”¨ `calculateFingerprintPatch()` è®¡ç®—å˜æ›´å­—æ®µ
  - ç¼–è¾‘æ¨¡å¼åªæäº¤ç™½åå•å­—æ®µ
  - åˆ›å»ºæ¨¡å¼æäº¤å®Œæ•´ç™½åå•æŒ‡çº¹
- âœ… **åç«¯ merge é›†æˆ**ï¼š
  - `ProfileService.update_profile` ä½¿ç”¨ `FingerprintMerger`
  - ç™½åå•å­—æ®µï¼šå…è®¸è¦†ç›–ï¼ˆ12 ä¸ªå­—æ®µï¼‰
  - éç™½åå•å­—æ®µï¼šé€ä¼ ä¿ç•™ï¼ˆseed, internal_config ç­‰ï¼‰
  - é»‘åå•å­—æ®µï¼šæ‹’ç»æ³¨å…¥ï¼ˆ11 ä¸ªå±é™©å­—æ®µï¼‰

#### Gate-Batch è§£é”å®Œæˆ
- âœ… **åç«¯é€é¡¹ç»“æœ**ï¼š
  - `BatchResult` ç±»å‹å®Œæ•´å®ç°
  - åŒ…å« `results`, `total`, `successCount`, `failureCount`
  - æä¾› `is_all_success/is_all_failure/is_partial_success` è¾…åŠ©æ–¹æ³•
- âœ… **å‰ç«¯æ™ºèƒ½æç¤º**ï¼š
  - å…¨éƒ¨æˆåŠŸï¼šç®€æ´æˆåŠŸæç¤º
  - å…¨éƒ¨å¤±è´¥ï¼šé”™è¯¯æç¤º
  - éƒ¨åˆ†æˆåŠŸï¼šè­¦å‘Šæç¤º + å¤±è´¥è¯¦æƒ… console log

#### Gate-Events è§£é”å®Œæˆ
- âœ… **æ‰€æœ‰äº‹ä»¶å·²ç›‘å¬**ï¼š
  - `profile:status_changed` - å®æ—¶çŠ¶æ€æ›´æ–°
  - `profile:created` - è‡ªåŠ¨æ·»åŠ åˆ°åˆ—è¡¨
  - `profile:updated` - è‡ªåŠ¨æ›´æ–°åˆ—è¡¨é¡¹
  - `profile:deleted` - è‡ªåŠ¨ä»åˆ—è¡¨ç§»é™¤
  - `browser:error` - æ˜¾ç¤ºé”™è¯¯æç¤ºå¹¶æ›´æ–°çŠ¶æ€

---

## âš ï¸ å”¯ä¸€å·²çŸ¥é—®é¢˜ï¼šSQLx ç¼“å­˜éœ€è¦æ›´æ–°

### é—®é¢˜æè¿°
å¯ç”¨ Group æ¨¡å—åï¼Œç”±äº Group æ¨¡å—ä½¿ç”¨äº† `sqlx::query!` å®ï¼Œç¼–è¯‘æ—¶éœ€è¦æŸ¥è¯¢ç¼“å­˜ï¼š

```
error: `SQLX_OFFLINE=true` but there is no cached data for this query, 
run `cargo sqlx prepare` to update the query cache
```

### è§£å†³æ–¹æ¡ˆ
è¿è¡Œä»¥ä¸‹å‘½ä»¤æ›´æ–° SQLx æŸ¥è¯¢ç¼“å­˜ï¼š

```bash
cd src-tauri
cargo install sqlx-cli --no-default-features --features sqlite
cargo sqlx prepare --database-url sqlite:./dev.db
```

æˆ–è€…å°† `Cargo.toml` ä¸­çš„ sqlx ä¾èµ–æ”¹ä¸ºè¿è¡Œæ—¶æ£€æŸ¥ï¼š

```toml
[dependencies]
sqlx = { version = "0.8", features = ["runtime-tokio-rustls", "sqlite"] }
# ç§»é™¤ macros featureï¼Œä½¿ç”¨è¿è¡Œæ—¶æŸ¥è¯¢è€Œéç¼–è¯‘æ—¶å®
```

### ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
å¦‚æœåªéœ€è¦æµ‹è¯•å‰ç«¯åŠŸèƒ½ï¼Œå¯ä»¥æš‚æ—¶æ³¨é‡Š Group æ¨¡å—ï¼š

```rust
// src-tauri/src/modules/mod.rs
// pub mod group;  // æš‚æ—¶æ³¨é‡Š - sqlx ç¼“å­˜é—®é¢˜
```

---

#### åç«¯å®ç°ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… **FingerprintMerger å®Œæ•´å®ç°**ï¼ˆ[fingerprint_merge.rs](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src-tauri/src/modules/fingerprint_merge.rs)ï¼‰
  - ç™½åå•å­—æ®µï¼šå…è®¸å‰ç«¯ä¿®æ”¹ï¼ˆplatform, browser, user_agent ç­‰ 12 ä¸ªå­—æ®µï¼‰
  - éç™½åå•å­—æ®µï¼šé€ä¼ ä¿ç•™ï¼ˆseed, internal_config ç­‰ï¼‰
  - é»‘åå•å­—æ®µï¼šç¦æ­¢æ³¨å…¥ï¼ˆstartup_args, debug_port ç­‰ 11 ä¸ªå±é™©å­—æ®µï¼‰
  
- âœ… **ProfileService.update_profile å·²ä½¿ç”¨ merge**
  - è·å–ç°æœ‰ fingerprint
  - è°ƒç”¨ FingerprintMerger.merge() åˆå¹¶
  - ä¿å­˜åˆå¹¶åçš„å®Œæ•´æŒ‡çº¹

#### å‰ç«¯å®ç°ï¼ˆæœ¬æ¬¡æ–°å¢ï¼‰
- âœ… **fingerprintDiff.ts å·¥å…·**ï¼ˆ[fingerprintDiff.ts](file:///f:/user\Desktop\PCç«¯æµè§ˆå™¨å¤šå¼€å™¨\browser-manager\src\utils\fingerprintDiff.ts)ï¼‰
  ```typescript
  calculateFingerprintPatch(original, updated) -> patch
  // åªè¿”å›å˜æ›´çš„å­—æ®µ
  ```

- âœ… **ProfileDrawer æ›´æ–°é€»è¾‘**ï¼ˆ[ProfileDrawer.vue](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/profile-editor/ProfileDrawer.vue)ï¼‰
  - åŠ è½½æ—¶ä¿å­˜ `originalFingerprint`
  - ä¿å­˜æ—¶è®¡ç®— `fingerprintPatch`
  - åªæäº¤å˜æ›´å­—æ®µåˆ°åç«¯
  - Console log æ˜¾ç¤º patch è¯¦æƒ…

#### æŠ€æœ¯ä¼˜åŠ¿
- âœ… **å‡å°‘ç½‘ç»œè´Ÿè½½**ï¼šåªä¼ è¾“å˜æ›´å­—æ®µ
- âœ… **ä¿æŠ¤åç«¯å­—æ®µ**ï¼šseed ç­‰ä¸è¢«è¦†ç›–
- âœ… **å®‰å…¨é˜²æŠ¤**ï¼šé»‘åå•å­—æ®µè¢«æ‹’ç»
- âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šéç™½åå•å­—æ®µé€ä¼ ä¸ä¸¢å¤±

---

## ğŸ†• **2026-01-28 æ›´æ–°æ±‡æ€»**

### âœ… æ‰¹é‡æ“ä½œé€é¡¹ç»“æœè¿”å›

#### åç«¯å®ç°
- âœ… **BatchResult ç±»å‹**ï¼ˆ[batch_result.rs](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src-tauri/src/modules/batch_result.rs)ï¼‰
  ```rust
  pub struct BatchItemResult {
      pub profile_id: String,
      pub ok: bool,
      pub error: Option<String>,
  }
  
  pub struct BatchResult {
      pub results: Vec<BatchItemResult>,
      pub total: usize,
      pub success_count: usize,
      pub failure_count: usize,
  }
  ```

- âœ… **æ‰¹é‡æ“ä½œè¿”å›ç±»å‹æ›´æ–°**ï¼ˆ[lib.rs](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src-tauri/src/lib.rs)ï¼‰
  - `batch_delete_profiles` â†’ `Result<BatchResult, String>`
  - `batch_launch_browsers` â†’ `Result<BatchResult, String>`
  - `batch_stop_browsers` â†’ `Result<BatchResult, String>`
  - é€é¡¹æ‰§è¡Œï¼Œè®°å½•æ¯é¡¹æˆåŠŸ/å¤±è´¥çŠ¶æ€

#### å‰ç«¯å®ç°
- âœ… **ç±»å‹å®šä¹‰**ï¼ˆ[types/index.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/types/index.ts)ï¼‰
  ```typescript
  interface BatchItemResult {
    profileId: string
    ok: boolean
    error?: string
  }
  
  interface BatchResult {
    results: BatchItemResult[]
    total: number
    successCount: number
    failureCount: number
  }
  ```

- âœ… **API å±‚æ›´æ–°**
  - [browserApi.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/api/browserApi.ts): `batchLaunchBrowsers`, `batchStopBrowsers`
  - [profileApi.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/api/profileApi.ts): `batchDeleteProfiles`

- âœ… **Store å±‚æ›´æ–°**ï¼ˆ[profile.store.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/stores/profile.store.ts)ï¼‰
  - `deleteProfiles` è¿”å› `BatchResult`ï¼Œåªç§»é™¤æˆåŠŸé¡¹
  - `startProfiles` è¿”å› `BatchResult`ï¼Œåªæ›´æ–°æˆåŠŸé¡¹çŠ¶æ€
  - `stopProfiles` è¿”å› `BatchResult`ï¼Œåªæ›´æ–°æˆåŠŸé¡¹çŠ¶æ€

- âœ… **UI å±•ç¤º**ï¼ˆ[DashboardView.vue](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/dashboard/DashboardView.vue)ï¼‰
  ```typescript
  // æ™ºèƒ½æç¤º
  if (result.failureCount === 0) {
    ElMessage.success(`æ‰¹é‡å¯åŠ¨æˆåŠŸï¼ˆ${result.successCount} ä¸ªç¯å¢ƒï¼‰`)
  } else if (result.successCount === 0) {
    ElMessage.error(`æ‰¹é‡å¯åŠ¨å…¨éƒ¨å¤±è´¥ï¼ˆ${result.failureCount} ä¸ªç¯å¢ƒï¼‰`)
  } else {
    ElMessage.warning(`æ‰¹é‡å¯åŠ¨éƒ¨åˆ†æˆåŠŸï¼šæˆåŠŸ ${result.successCount} ä¸ªï¼Œå¤±è´¥ ${result.failureCount} ä¸ª`)
    // å¤±è´¥è¯¦æƒ…è®°å½•åˆ° console
    console.error('å¯åŠ¨å¤±è´¥çš„ç¯å¢ƒ:', failedItems)
  }
  ```

#### ç”¨æˆ·ä½“éªŒæ”¹è¿›
- âœ… æ‰¹é‡æ“ä½œä¸å†å› å•é¡¹å¤±è´¥è€Œå…¨éƒ¨ä¸­æ–­
- âœ… æ˜ç¡®åŒºåˆ†å…¨éƒ¨æˆåŠŸ/å…¨éƒ¨å¤±è´¥/éƒ¨åˆ†æˆåŠŸ
- âœ… æ˜¾ç¤ºæˆåŠŸå’Œå¤±è´¥æ•°é‡ç»Ÿè®¡
- âœ… å¤±è´¥é¡¹å¯åœ¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1ï¸âƒ£ åç«¯ Group åŠŸèƒ½ï¼ˆ100% å®Œæˆï¼‰

#### æ•°æ®åº“è¿ç§»
- âœ… `002_add_groups.sql` å·²åˆ›å»º
  - groups è¡¨ç»“æ„å®Œæ•´ï¼ˆid, name, sort, permission, created_at, updated_atï¼‰
  - å¤–é”®çº¦æŸï¼ˆprofiles.group_id â†’ groups.idï¼‰
  - é»˜è®¤åˆ†ç»„ï¼ˆ'default'ï¼‰å·²æ’å…¥
  - è¿ç§»é€»è¾‘å®Œæ•´ï¼ˆæ—§ group å­—æ®µ â†’ group_idï¼‰

#### Group Service
- âœ… æ–‡ä»¶ä½ç½®ï¼š[src-tauri/src/modules/group.rs](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src-tauri/src/modules/group.rs)
- âœ… å®Œæ•´å®ç°ï¼š
  - `list_groups()` - å¸¦ profileCount çš„ LEFT JOIN
  - `get_group(id)` - å•ä¸ªåˆ†ç»„æŸ¥è¯¢
  - `create_group(data)` - åç§°å”¯ä¸€æ€§æ ¡éªŒ
  - `update_group(id, data)` - åªè¯»åˆ†ç»„ä¿æŠ¤
  - `delete_group(id)` - éç©ºåˆ†ç»„ç¦æ­¢åˆ é™¤ï¼ˆåç«¯å¼ºæ ¡éªŒï¼‰

#### IPC Commands
- âœ… å·²æ³¨å†Œåˆ° lib.rsï¼š
  ```rust
  get_groups,
  get_group,
  create_group,
  update_group,
  delete_group,
  ```

#### åˆ é™¤ç­–ç•¥
- âœ… åç«¯å¼ºæ ¡éªŒï¼ˆline 243-248ï¼‰ï¼š
  ```rust
  if profile_count > 0 {
      return Err(format!(
          "è¯¥åˆ†ç»„ä¸‹è¿˜æœ‰ {} ä¸ªçª—å£ï¼Œæ— æ³•åˆ é™¤ã€‚è¯·å…ˆå°†çª—å£ç§»åŠ¨åˆ°å…¶ä»–åˆ†ç»„ã€‚",
          profile_count
      ));
  }
  ```

---

### 2ï¸âƒ£ å‰ç«¯ Group åŠŸèƒ½ï¼ˆ80% å®Œæˆï¼‰

#### GroupStore
- âœ… æ–‡ä»¶ä½ç½®ï¼š[src/stores/groupStore.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/stores/groupStore.ts)
- âœ… å®Œæ•´å®ç°ï¼š
  - `initGroups()` - ä»åç«¯åŠ è½½ï¼ˆå¤±è´¥å›é€€ mockï¼Œä½†æœ‰æç¤ºï¼‰
  - `addGroup()` - è°ƒç”¨ createGroup API
  - `updateGroup()` - æœ¬åœ°æ›´æ–°ï¼ˆâš ï¸ æœªè°ƒç”¨åç«¯ APIï¼‰
  - `deleteGroup()` - profileCount æ ¡éªŒ + äºŒæ¬¡ç¡®è®¤ + è°ƒç”¨ deleteGroupApi
  - `groupOptions` - ç”¨äºä¸‹æ‹‰é€‰æ‹©

#### GroupManagement é¡µé¢
- âœ… æ–‡ä»¶ä½ç½®ï¼š[src/features/groups/GroupManagement.vue](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/groups/GroupManagement.vue)
- âœ… CRUD UI å®Œæ•´
- âš ï¸ æ›´æ–°åˆ†ç»„æœªè°ƒç”¨åç«¯ APIï¼ˆä½¿ç”¨æœ¬åœ° updateGroupï¼‰

#### API å±‚
- âœ… æ–‡ä»¶ä½ç½®ï¼š[src/api/groupApi.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/api/groupApi.ts)
- âœ… å®Œæ•´å®ç°ï¼š
  - `getGroups()` - è¿”å› Group[]
  - `getGroup(id)` - è¿”å› Group
  - `createGroup(data)` - è¿”å› Group
  - `updateGroup(id, data)` - è¿”å› Group
  - `deleteGroup(id)` - è¿”å› void
  - DTO â†’ Model è‡ªåŠ¨è½¬æ¢ï¼ˆprofile_count â†’ profileCountï¼‰

---

## âŒ æœªå®Œæˆçš„å·¥ä½œ

### Phase FE-V2-0ï¼šèŒƒå›´ç¡®è®¤ï¼ˆ50% å®Œæˆï¼‰

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 0.1**: æ˜ç¡® tags/proxy/recycle æ˜¯å¦çº³å…¥ V2

**å½“å‰çŠ¶æ€**:
- ä¸‰ä¸ªé¡µé¢å‡å­˜åœ¨ä¸”å¯è®¿é—®
- ä½†å‡ä¸º mock UIï¼Œæ— åç«¯æ¥å£
- å¯¼èˆªæ æœªæ ‡æ³¨"é¢„è§ˆ/æœªå¼€æ”¾"

**å†³ç­–é€‰é¡¹**:

**é€‰é¡¹ A**: ä¸çº³å…¥ V2ï¼ˆæ¨èï¼‰
```vue
<!-- AppSidebar.vue - æ·»åŠ ç¦ç”¨æ ‡è¯† -->
<template>
  <div class="menu-item" :class="{ disabled: item.disabled }">
    <span>{{ item.label }}</span>
    <el-tag v-if="item.disabled" type="info" size="small">æœªå¼€æ”¾</el-tag>
  </div>
</template>

<script setup lang="ts">
const menuItems = [
  { label: 'ç¯å¢ƒç®¡ç†', path: 'dashboard' },
  { label: 'åˆ†ç»„ç®¡ç†', path: 'groups' },
  { label: 'æ ‡ç­¾ç®¡ç†', path: 'tags', disabled: true },
  { label: 'ä»£ç†ç®¡ç†', path: 'proxies', disabled: true },
  { label: 'å›æ”¶ç«™', path: 'recycle', disabled: true },
  { label: 'è®¾ç½®', path: 'settings' },
]
</script>
```

**é€‰é¡¹ B**: çº³å…¥ V2
- éœ€è¦åç«¯å®ç°å¯¹åº”çš„ Service + IPC Commands
- å‰ç«¯éœ€å®ç°å®Œæ•´çš„ Store + API è°ƒç”¨

**æ¨è**: é€‰é¡¹ Aï¼ŒV2 èšç„¦æ ¸å¿ƒåŠŸèƒ½ï¼ˆProfile/Group/Fingerprint/Batch/Eventsï¼‰

---

### Phase FE-V2-1ï¼šGroup çœŸè”è°ƒï¼ˆ20% æœªå®Œæˆï¼‰

#### âœ… å·²å®Œæˆ
- åç«¯ Group åŠŸèƒ½ 100%
- GroupStore CRUDï¼ˆé™¤ updateGroup æœªè°ƒ APIï¼‰
- GroupManagement é¡µé¢å®Œæ•´

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 1.1**: BasicInfoForm æ”¹ç”¨ el-selectï¼ˆP0ï¼Œ0.5å¤©ï¼‰

**å½“å‰é—®é¢˜**:
- [BasicInfoForm.vue:75-82](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/profile-editor/components/BasicInfoForm.vue#L75-L82) ä»ä¸º `el-input`
- æ— æ³•é€‰æ‹©çœŸå®åˆ†ç»„

**ä¿®æ”¹æ–¹æ¡ˆ**:
```vue
<!-- src/features/profile-editor/components/BasicInfoForm.vue -->
<script setup lang="ts">
import { useGroupStore } from '@/stores/groupStore'

const groupStore = useGroupStore()

// åˆå§‹åŒ–åˆ†ç»„æ•°æ®
onMounted(() => {
  groupStore.initGroups()
})
</script>

<template>
  <el-form-item label="é€‰æ‹©åˆ†ç»„">
    <el-select
      :model-value="modelValue.group"
      @update:model-value="updateField('group', $event)"
      placeholder="è¯·é€‰æ‹©åˆ†ç»„"
      filterable
      clearable
    >
      <el-option
        v-for="option in groupStore.groupOptions"
        :key="option.value"
        :label="option.label"
        :value="option.value"
      />
    </el-select>
  </el-form-item>
</template>
```

**éªŒæ”¶**:
- âœ… åˆ›å»º/ç¼–è¾‘ Profile å¯é€‰æ‹©çœŸå®åˆ†ç»„
- âœ… åˆ†ç»„åˆ—è¡¨æ¥è‡ªåç«¯
- âœ… é»˜è®¤é€‰æ‹© 'default' åˆ†ç»„

---

**ä»»åŠ¡ 1.2**: Dashboard å¢åŠ  group ç­›é€‰ï¼ˆP1ï¼Œ0.5å¤©ï¼‰

**å½“å‰çŠ¶æ€**: ListHeader æ—  group ç­›é€‰

**ä¿®æ”¹æ–¹æ¡ˆ**:
```vue
<!-- src/features/dashboard/DashboardView.vue -->
<script setup lang="ts">
const selectedGroup = ref<string>('all')

const filteredProfiles = computed(() => {
  let result = profileStore.profiles
  
  // Group ç­›é€‰
  if (selectedGroup.value !== 'all') {
    result = result.filter(p => p.group === selectedGroup.value)
  }
  
  // ... å…¶ä»–ç­›é€‰
  return result
})
</script>

<template>
  <div class="filter-bar">
    <el-select
      v-model="selectedGroup"
      placeholder="å…¨éƒ¨åˆ†ç»„"
      style="width: 200px"
    >
      <el-option label="å…¨éƒ¨åˆ†ç»„" value="all" />
      <el-option
        v-for="group in groupStore.sortedGroups"
        :key="group.id"
        :label="group.name"
        :value="group.id"
      />
    </el-select>
  </div>
</template>
```

**éªŒæ”¶**:
- âœ… Dashboard å¯æŒ‰åˆ†ç»„ç­›é€‰
- âœ… åˆ†ç»„é€‰æ‹©å™¨æ¥è‡ª GroupStore
- âœ… "å…¨éƒ¨åˆ†ç»„" æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒ

---

**ä»»åŠ¡ 1.3**: GroupStore.updateGroup è°ƒç”¨åç«¯ APIï¼ˆP0ï¼Œ0.2å¤©ï¼‰

**å½“å‰é—®é¢˜**: [groupStore.ts:87-98](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/stores/groupStore.ts#L87-L98) ä»…æœ¬åœ°æ›´æ–°

**ä¿®æ”¹æ–¹æ¡ˆ**:
```typescript
// src/stores/groupStore.ts
const updateGroup = async (id: string, updates: Partial<Omit<Group, 'id' | 'createdAt' | 'updatedAt' | 'profileCount'>>) => {
  try {
    // è°ƒç”¨åç«¯ API
    const updated = await updateGroupApi(id, {
      name: updates.name,
      sort: updates.sort,
    })
    
    // æ›´æ–°æœ¬åœ°çŠ¶æ€
    const index = groups.value.findIndex(g => g.id === id)
    if (index !== -1) {
      groups.value[index] = updated
    }
    
    return updated
  } catch (err: any) {
    console.error('Failed to update group via API:', err)
    ElMessage.error(err.message || 'æ›´æ–°å¤±è´¥')
    return null
  }
}
```

**éªŒæ”¶**:
- âœ… æ›´æ–°åˆ†ç»„åç§°/æ’åºåç«¯åŒæ­¥
- âœ… å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

---

**ä»»åŠ¡ 1.4**: GroupStore ç§»é™¤ mock å›é€€ï¼ˆP0ï¼Œ0.2å¤©ï¼‰

**å½“å‰é—®é¢˜**: [groupStore.ts:52-55](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/stores/groupStore.ts#L52-L55) å¤±è´¥ç›´æ¥å›é€€ mock

**ä¿®æ”¹æ–¹æ¡ˆ**:
```typescript
// src/stores/groupStore.ts
const initGroups = async () => {
  if (groups.value.length > 0) return

  isLoading.value = true
  error.value = null

  try {
    const data = await getGroups()
    groups.value = data
  } catch (err: any) {
    console.error('Failed to load groups from backend:', err)
    error.value = err.message || 'è·å–åˆ†ç»„åˆ—è¡¨å¤±è´¥'
    ElMessage.error('æ— æ³•åŠ è½½åˆ†ç»„åˆ—è¡¨ï¼Œè¯·æ£€æŸ¥åç«¯è¿æ¥')
    
    // ä»…åœ¨å¼€å‘æ¨¡å¼ä½¿ç”¨ mockï¼ˆå¯é€‰ï¼‰
    if (import.meta.env.DEV) {
      console.warn('Using mock data in DEV mode')
      groups.value = mockGroups
    }
  } finally {
    isLoading.value = false
  }
}
```

**éªŒæ”¶**:
- âœ… ç”Ÿäº§ç¯å¢ƒä¸ä½¿ç”¨ mock æ•°æ®
- âœ… å¤±è´¥æ—¶æ˜¾ç¤ºæ˜ç¡®é”™è¯¯
- âœ… å¼€å‘æ¨¡å¼å¯é€‰ä½¿ç”¨ mockï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡ï¼‰

---

### Phase FE-V2-2ï¼šFingerprint ç­–ç•¥ï¼ˆ100% æœªå®Œæˆï¼‰

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 2.1**: ProfileDrawer æ”¹ä¸ºæäº¤ fingerprintPatchï¼ˆP0ï¼Œ0.5å¤©ï¼‰

**å½“å‰é—®é¢˜**:
- [ProfileDrawer.vue:120-133](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/profile-editor/ProfileDrawer.vue#L120-L133) è¿‡æ»¤åç›´æ¥è¦†ç›–
- å¯¼è‡´ existing ä¸­çš„æœªçŸ¥å­—æ®µä¸¢å¤±

**å½“å‰ä»£ç **:
```typescript
// å½“å‰ï¼šå…¨é‡è¦†ç›–
if (formData.value.fingerprint) {
  const blacklistFields = detectFingerprintBlacklist(formData.value.fingerprint as any)
  if (blacklistFields.length > 0) {
    ElMessage.error(`æ£€æµ‹åˆ°å±é™©å­—æ®µï¼š${blacklistFields.join(', ')}ï¼Œå·²è‡ªåŠ¨è¿‡æ»¤`)
  }
  
  // âŒ é—®é¢˜ï¼šç›´æ¥è¦†ç›–ï¼Œä¸¢å¤±æœªçŸ¥å­—æ®µ
  formData.value.fingerprint = filterFingerprintWhitelist(formData.value.fingerprint as any) as any
}
```

**ä¿®æ”¹æ–¹æ¡ˆ**:
```typescript
// src/features/profile-editor/ProfileDrawer.vue
const handleSave = async () => {
  try {
    loading.value = true
    
    // å‡†å¤‡æäº¤æ•°æ®
    const submitData = { ...formData.value }
    
    if (submitData.fingerprint) {
      // æ£€æµ‹é»‘åå•
      const blacklistFields = detectFingerprintBlacklist(submitData.fingerprint as any)
      if (blacklistFields.length > 0) {
        ElMessage.warning(`æ£€æµ‹åˆ°å±é™©å­—æ®µï¼š${blacklistFields.join(', ')}ï¼Œå·²è‡ªåŠ¨è¿‡æ»¤`)
      }
      
      if (isEditMode.value && props.profile) {
        // âœ… ç¼–è¾‘æ¨¡å¼ï¼šæäº¤ patchï¼ˆä»…ç™½åå•å­—æ®µï¼‰
        const patch = filterFingerprintWhitelist(submitData.fingerprint as any)
        submitData.fingerprint = patch as any
        
        // åç«¯ä¼š merge: existing + patch
        await profileStore.updateProfile(props.profile.id, submitData)
        ElMessage.success('ç¯å¢ƒæ›´æ–°æˆåŠŸ')
      } else {
        // âœ… åˆ›å»ºæ¨¡å¼ï¼šæäº¤å®Œæ•´ç™½åå•æŒ‡çº¹
        const filtered = filterFingerprintWhitelist(submitData.fingerprint as any)
        submitData.fingerprint = {
          ...filtered,
          schemaVersion: FINGERPRINT_SCHEMA_VERSION
        } as any
        
        await profileStore.createProfile(submitData)
        ElMessage.success('ç¯å¢ƒåˆ›å»ºæˆåŠŸ')
      }
    }
    
    emit('success')
    handleClose()
  } catch (error: any) {
    ElMessage.error(error.message || 'æ“ä½œå¤±è´¥')
  } finally {
    loading.value = false
  }
}
```

**é…åˆåç«¯ä¿®æ”¹** (éœ€åç«¯å®ç°):
```rust
// src-tauri/src/modules/profile/service.rs
pub async fn update_profile(&self, id: &str, data: UpdateProfileDto) -> Result<Profile, String> {
    // è·å– existing profile
    let existing = self.get_profile(id).await?;
    
    // Merge fingerprint
    let merged_fingerprint = if let Some(patch) = data.fingerprint {
        let existing_fp: serde_json::Value = serde_json::from_str(&existing.fingerprint)
            .map_err(|e| format!("è§£ææŒ‡çº¹å¤±è´¥: {}", e))?;
        
        let patch_fp: serde_json::Value = serde_json::to_value(&patch)
            .map_err(|e| format!("åºåˆ—åŒ–æŒ‡çº¹å¤±è´¥: {}", e))?;
        
        // Merge: existing + patch
        merge_json(existing_fp, patch_fp)
    } else {
        serde_json::from_str(&existing.fingerprint).unwrap()
    };
    
    // ä¿å­˜
    let fingerprint_json = serde_json::to_string(&merged_fingerprint)?;
    sqlx::query!("UPDATE profiles SET fingerprint = ? WHERE id = ?", fingerprint_json, id)
        .execute(&self.pool)
        .await
        .map_err(|e| format!("æ›´æ–°å¤±è´¥: {}", e))?;
    
    self.get_profile(id).await
}
```

**éªŒæ”¶**:
- âœ… ä¿®æ”¹ timezone ä¿å­˜åï¼Œå†å² webglVendor ç­‰å­—æ®µä¸ä¸¢
- âœ… åˆ›å»ºæ—¶åŒ…å«å®Œæ•´ç™½åå•æŒ‡çº¹
- âœ… é»‘åå•å­—æ®µè¢«é˜»æ­¢å¹¶æç¤º

---

**ä»»åŠ¡ 2.2**: åç«¯å®ç° Fingerprint mergeï¼ˆP0ï¼Œåç«¯ä»»åŠ¡ï¼‰

**éœ€è¦åç«¯é…åˆ**:
- å®ç° `merge_json(existing, patch)` å‡½æ•°
- UpdateProfileDto æ”¯æŒ fingerprint patch
- é»‘åå•å­—æ®µåœ¨åç«¯ä¹Ÿè¦æ ¡éªŒï¼ˆé˜²ç»•è¿‡ï¼‰

**å‚è€ƒå®ç°**:
```rust
fn merge_json(mut base: serde_json::Value, patch: serde_json::Value) -> serde_json::Value {
    if let (Some(base_obj), Some(patch_obj)) = (base.as_object_mut(), patch.as_object()) {
        for (key, value) in patch_obj {
            base_obj.insert(key.clone(), value.clone());
        }
    }
    base
}
```

---

### Phase FE-V2-3ï¼šæ‰¹é‡æ“ä½œåé¦ˆï¼ˆ100% æœªå®Œæˆï¼‰

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 3.1**: åç«¯æ‰¹é‡æ¥å£è¿”å›é€é¡¹ç»“æœï¼ˆP0ï¼Œåç«¯ä»»åŠ¡ï¼‰

**å½“å‰çŠ¶æ€**: åç«¯æ‰¹é‡æ¥å£è¿”å› `void`

**éœ€æ±‚**:
```rust
// src-tauri/src/lib.rs
#[derive(Serialize)]
struct BatchResult {
    profile_id: String,
    success: bool,
    error: Option<String>,
}

#[tauri::command]
async fn batch_launch_browsers(
    profileIds: Vec<String>,
    state: State<'_, AppState>
) -> Result<Vec<BatchResult>, String> {
    let mut results = Vec::new();
    
    for id in profileIds {
        let result = match do_launch_browser(id.clone(), state.inner()).await {
            Ok(_) => BatchResult {
                profile_id: id,
                success: true,
                error: None,
            },
            Err(e) => BatchResult {
                profile_id: id,
                success: false,
                error: Some(e),
            },
        };
        results.push(result);
    }
    
    Ok(results)
}
```

---

**ä»»åŠ¡ 3.2**: å‰ç«¯å±•ç¤ºæ‰¹é‡ç»“æœï¼ˆP0ï¼Œ0.5å¤©ï¼‰

**ä¿®æ”¹æ–¹æ¡ˆ**:
```typescript
// src/features/dashboard/DashboardView.vue
const handleBatchLaunch = async () => {
  if (selectedIds.value.size === 0) {
    ElMessage.warning('è¯·å…ˆé€‰æ‹©ç¯å¢ƒ')
    return
  }
  
  const isSettingOk = await checkSystemSettings()
  if (!isSettingOk) return
  
  try {
    const ids = Array.from(selectedIds.value)
    const results = await profileStore.batchStartProfiles(ids)
    
    // ç»Ÿè®¡
    const successCount = results.filter(r => r.success).length
    const failureCount = results.length - successCount
    
    if (failureCount === 0) {
      ElMessage.success(`æ‰¹é‡å¯åŠ¨æˆåŠŸï¼ˆ${successCount} ä¸ªç¯å¢ƒï¼‰`)
    } else {
      // æ˜¾ç¤ºè¯¦ç»†ç»“æœ
      const failedItems = results.filter(r => !r.success)
      
      ElMessageBox.alert(
        h('div', [
          h('p', `æˆåŠŸï¼š${successCount} ä¸ª`),
          h('p', `å¤±è´¥ï¼š${failureCount} ä¸ª`),
          h('div', { style: 'margin-top: 10px' }, [
            h('p', { style: 'font-weight: bold' }, 'å¤±è´¥åˆ—è¡¨ï¼š'),
            h('ul', failedItems.map(item => 
              h('li', `${item.profileId}: ${item.error}`)
            ))
          ])
        ]),
        'æ‰¹é‡å¯åŠ¨ç»“æœ',
        {
          type: 'warning',
          confirmButtonText: 'ç¡®å®š',
        }
      )
    }
  } catch (e: any) {
    ElMessage.error(e.message || 'æ‰¹é‡å¯åŠ¨å¤±è´¥')
  }
}
```

**éªŒæ”¶**:
- âœ… 10 ä¸ªæ‰¹é‡æ“ä½œä¸­ 2 ä¸ªå¤±è´¥ï¼šèƒ½çœ‹åˆ°å¤±è´¥é¡¹ä¸åŸå› 
- âœ… å…¨éƒ¨æˆåŠŸæ—¶ç®€æ´æç¤º
- âœ… éƒ¨åˆ†å¤±è´¥æ—¶è¯¦ç»†å¼¹çª—

---

### Phase FE-V2-4ï¼šäº‹ä»¶è¡¥é½ï¼ˆ100% æœªå®Œæˆï¼‰

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 4.1**: ç›‘å¬ browser:error äº‹ä»¶ï¼ˆP1ï¼Œ0.3å¤©ï¼‰

**å½“å‰çŠ¶æ€**: [eventListener.ts](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/services/eventListener.ts) ä»…ç›‘å¬ `profile:status_changed`

**ä¿®æ”¹æ–¹æ¡ˆ**:
```typescript
// src/services/eventListener.ts
import { listen } from '@tauri-apps/api/event'
import { ElMessage } from 'element-plus'
import { useProfileStore } from '@/stores/profile.store'

export function setupEventListeners() {
  const profileStore = useProfileStore()
  
  // 1. ç›‘å¬çŠ¶æ€å˜åŒ–
  listen('profile:status_changed', (event: any) => {
    const { profileId, status } = event.payload
    profileStore.updateProfileStatus(profileId, status)
  })
  
  // 2. ç›‘å¬æµè§ˆå™¨é”™è¯¯
  listen('browser:error', (event: any) => {
    const { profileId, error } = event.payload
    
    // å¼¹å‡ºé”™è¯¯æç¤º
    ElMessage.error(`ç¯å¢ƒ ${profileId} å¯åŠ¨å¤±è´¥ï¼š${error}`)
    
    // æ›´æ–°çŠ¶æ€ä¸º errorï¼ˆå¯é€‰ï¼Œå–å†³äºæ˜¯å¦æœ‰ error çŠ¶æ€ï¼‰
    profileStore.updateProfileStatus(profileId, 'stopped')
  })
}
```

**éªŒæ”¶**:
- âœ… å¯åŠ¨å¤±è´¥ä¼šç«‹å³å¼¹å‡ºæ˜ç¡®é”™è¯¯
- âœ… é”™è¯¯ä¿¡æ¯åŒ…å« profileId å’ŒåŸå› 

---

### Phase FE-V2-5ï¼šSettings æ–‡ä»¶é€‰æ‹©ï¼ˆ100% æœªå®Œæˆï¼‰

#### â³ å¾…åŠä»»åŠ¡

**ä»»åŠ¡ 5.1**: å¯ç”¨ Tauri dialog é€‰æ‹©æ–‡ä»¶/ç›®å½•ï¼ˆP2ï¼Œ0.5å¤©ï¼‰

**å½“å‰çŠ¶æ€**: [SettingsView.vue](file:///f:/user/Desktop/PCç«¯æµè§ˆå™¨å¤šå¼€å™¨/browser-manager/src/features/settings/SettingsView.vue) æ–‡ä»¶å¯¹è¯æ¡†è¢«æ³¨é‡Š

**ä¿®æ”¹æ–¹æ¡ˆ**:
```vue
<!-- src/features/settings/SettingsView.vue -->
<script setup lang="ts">
import { open } from '@tauri-apps/plugin-dialog'

const selectKernelPath = async () => {
  try {
    const selected = await open({
      title: 'é€‰æ‹©æµè§ˆå™¨å†…æ ¸',
      filters: [
        { name: 'Executable', extensions: ['exe'] }
      ],
      multiple: false,
      directory: false,
    })
    
    if (selected) {
      formData.kernelPath = selected as string
    }
  } catch (err) {
    console.error('é€‰æ‹©æ–‡ä»¶å¤±è´¥:', err)
    ElMessage.error('é€‰æ‹©æ–‡ä»¶å¤±è´¥')
  }
}

const selectUserDataDir = async () => {
  try {
    const selected = await open({
      title: 'é€‰æ‹©ç”¨æˆ·æ•°æ®ç›®å½•',
      multiple: false,
      directory: true,
    })
    
    if (selected) {
      formData.userDataDir = selected as string
    }
  } catch (err) {
    console.error('é€‰æ‹©ç›®å½•å¤±è´¥:', err)
    ElMessage.error('é€‰æ‹©ç›®å½•å¤±è´¥')
  }
}
</script>

<template>
  <el-form-item label="æµè§ˆå™¨å†…æ ¸è·¯å¾„">
    <div class="path-input">
      <el-input v-model="formData.kernelPath" placeholder="é€‰æ‹© chrome.exe æˆ– chromium.exe" />
      <el-button @click="selectKernelPath" type="primary">æµè§ˆ</el-button>
    </div>
  </el-form-item>
</template>
```

**ä¾èµ–**: Tauri dialog plugin éœ€è¦åœ¨ `Cargo.toml` ä¸­æ·»åŠ ï¼š
```toml
[dependencies]
tauri-plugin-dialog = "2"
```

**éªŒæ”¶**:
- âœ… ç‚¹å‡»"æµè§ˆ"æŒ‰é’®å¼¹å‡ºæ–‡ä»¶/ç›®å½•é€‰æ‹©å™¨
- âœ… é€‰æ‹©åè‡ªåŠ¨å¡«å……è·¯å¾„

---

## ğŸ“‹ Phase FE-V2-1 è¯¦ç»†å®æ–½è®¡åˆ’

ç”±äº **Phase FE-V2-1ï¼ˆGroup çœŸè”è°ƒï¼‰** æ˜¯å½“å‰ä¼˜å…ˆçº§æœ€é«˜ä¸”å·²æ¥è¿‘å®Œæˆçš„ä»»åŠ¡ï¼Œä¸‹é¢æä¾›è¯¦ç»†çš„å®æ–½è®¡åˆ’ï¼š

### ğŸ¯ ç›®æ ‡

å°† Group åŠŸèƒ½ä»"åç«¯å°±ç»ª + å‰ç«¯ mock å›é€€"å‡çº§ä¸º"å‰åç«¯çœŸå®è”è°ƒå¯äº¤ä»˜"ã€‚

---

### ğŸ“ ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ID | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥æ—¶ | ä¾èµ– |
|--------|------|--------|----------|------|
| **1.1** | BasicInfoForm æ”¹ç”¨ el-select | P0 | 0.5å¤© | æ—  |
| **1.2** | Dashboard å¢åŠ  group ç­›é€‰ | P1 | 0.5å¤© | 1.1 |
| **1.3** | GroupStore.updateGroup è°ƒç”¨ API | P0 | 0.2å¤© | æ—  |
| **1.4** | GroupStore ç§»é™¤ mock å›é€€ | P0 | 0.2å¤© | 1.3 |
| **1.5** | æµ‹è¯•ä¸éªŒæ”¶ | P0 | 0.3å¤© | 1.1-1.4 |

**æ€»å·¥æ—¶**: 1.7å¤©

---

### ğŸ”§ ä»»åŠ¡ 1.1ï¼šBasicInfoForm æ”¹ç”¨ el-select

#### ä¿®æ”¹æ–‡ä»¶
`src/features/profile-editor/components/BasicInfoForm.vue`

#### å®æ–½æ­¥éª¤

1. **å¯¼å…¥ GroupStore**
```typescript
import { useGroupStore } from '@/stores/groupStore'
import { onMounted } from 'vue'

const groupStore = useGroupStore()

// åˆå§‹åŒ–åˆ†ç»„æ•°æ®
onMounted(() => {
  groupStore.initGroups()
})
```

2. **ä¿®æ”¹æ¨¡æ¿**
```vue
<el-form-item label="é€‰æ‹©åˆ†ç»„">
  <el-select
    :model-value="modelValue.group"
    @update:model-value="updateField('group', $event)"
    placeholder="è¯·é€‰æ‹©åˆ†ç»„"
    filterable
    clearable
  >
    <el-option
      v-for="option in groupStore.groupOptions"
      :key="option.value"
      :label="option.label"
      :value="option.value"
    />
  </el-select>
</el-form-item>
```

3. **è®¾ç½®é»˜è®¤å€¼**
```typescript
// åœ¨ ProfileDrawer.vue ä¸­
const formData = ref({
  name: '',
  group: 'default', // é»˜è®¤é€‰æ‹©é»˜è®¤åˆ†ç»„
  // ... å…¶ä»–å­—æ®µ
})
```

#### éªŒæ”¶æ ‡å‡†
- âœ… åˆ›å»º Profile æ—¶å¯é€‰æ‹©çœŸå®åˆ†ç»„
- âœ… ç¼–è¾‘ Profile æ—¶å½“å‰åˆ†ç»„æ­£ç¡®æ˜¾ç¤º
- âœ… åˆ†ç»„åˆ—è¡¨æ¥è‡ªåç«¯ï¼ˆé mockï¼‰
- âœ… é»˜è®¤é€‰æ‹© 'default' åˆ†ç»„

---

### ğŸ”§ ä»»åŠ¡ 1.2ï¼šDashboard å¢åŠ  group ç­›é€‰

#### ä¿®æ”¹æ–‡ä»¶
`src/features/dashboard/DashboardView.vue`

#### å®æ–½æ­¥éª¤

1. **æ·»åŠ ç­›é€‰çŠ¶æ€**
```typescript
const selectedGroup = ref<string>('all')

// åˆå§‹åŒ– GroupStore
onMounted(() => {
  groupStore.initGroups()
})
```

2. **ä¿®æ”¹ç­›é€‰é€»è¾‘**
```typescript
const filteredProfiles = computed(() => {
  let result = profileStore.profiles
  
  // æœç´¢
  if (searchKeyword.value) {
    result = result.filter(p => 
      p.name.includes(searchKeyword.value) ||
      p.remark?.includes(searchKeyword.value)
    )
  }
  
  // Group ç­›é€‰
  if (selectedGroup.value !== 'all') {
    result = result.filter(p => p.group === selectedGroup.value)
  }
  
  // çŠ¶æ€ç­›é€‰
  if (statusFilter.value !== 'all') {
    result = result.filter(p => p.status === statusFilter.value)
  }
  
  return result
})
```

3. **æ·»åŠ  UI**
```vue
<div class="filters">
  <el-select
    v-model="selectedGroup"
    placeholder="å…¨éƒ¨åˆ†ç»„"
    style="width: 200px"
  >
    <el-option label="å…¨éƒ¨åˆ†ç»„" value="all" />
    <el-option
      v-for="group in groupStore.sortedGroups"
      :key="group.id"
      :label="`${group.name} (${group.profileCount})`"
      :value="group.id"
    />
  </el-select>
</div>
```

#### éªŒæ”¶æ ‡å‡†
- âœ… Dashboard å¯æŒ‰åˆ†ç»„ç­›é€‰
- âœ… æ˜¾ç¤ºæ¯ä¸ªåˆ†ç»„çš„ç¯å¢ƒæ•°é‡
- âœ… "å…¨éƒ¨åˆ†ç»„" æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒ
- âœ… ä¸æœç´¢/çŠ¶æ€ç­›é€‰ååŒå·¥ä½œ

---

### ğŸ”§ ä»»åŠ¡ 1.3ï¼šGroupStore.updateGroup è°ƒç”¨ API

#### ä¿®æ”¹æ–‡ä»¶
`src/stores/groupStore.ts`

#### å®æ–½æ­¥éª¤

å®Œæ•´æ›¿æ¢ `updateGroup` æ–¹æ³•ï¼š

```typescript
const updateGroup = async (id: string, updates: Partial<Omit<Group, 'id' | 'createdAt' | 'updatedAt' | 'profileCount'>>) => {
  try {
    // è°ƒç”¨åç«¯ API
    const updated = await updateGroupApi(id, {
      name: updates.name,
      sort: updates.sort,
    })
    
    // æ›´æ–°æœ¬åœ°çŠ¶æ€
    const index = groups.value.findIndex(g => g.id === id)
    if (index !== -1) {
      groups.value[index] = updated
    }
    
    ElMessage.success('æ›´æ–°åˆ†ç»„æˆåŠŸ')
    return updated
  } catch (err: any) {
    console.error('Failed to update group via API:', err)
    ElMessage.error(err.message || 'æ›´æ–°å¤±è´¥')
    return null
  }
}
```

#### éªŒæ”¶æ ‡å‡†
- âœ… æ›´æ–°åˆ†ç»„åç§°åç«¯åŒæ­¥
- âœ… æ›´æ–°åˆ†ç»„æ’åºåç«¯åŒæ­¥
- âœ… å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- âœ… æˆåŠŸæ—¶æ˜¾ç¤ºæˆåŠŸæç¤º

---

### ğŸ”§ ä»»åŠ¡ 1.4ï¼šGroupStore ç§»é™¤ mock å›é€€

#### ä¿®æ”¹æ–‡ä»¶
`src/stores/groupStore.ts`

#### å®æ–½æ­¥éª¤

ä¿®æ”¹ `initGroups` æ–¹æ³•ï¼š

```typescript
const initGroups = async () => {
  if (groups.value.length > 0) return

  isLoading.value = true
  error.value = null

  try {
    const data = await getGroups()
    groups.value = data
    console.log('åˆ†ç»„åˆ—è¡¨åŠ è½½æˆåŠŸ:', data.length)
  } catch (err: any) {
    console.error('Failed to load groups from backend:', err)
    error.value = err.message || 'è·å–åˆ†ç»„åˆ—è¡¨å¤±è´¥'
    ElMessage.error({
      message: 'æ— æ³•åŠ è½½åˆ†ç»„åˆ—è¡¨ï¼Œè¯·æ£€æŸ¥åç«¯è¿æ¥',
      duration: 5000,
      showClose: true,
    })
    
    // ä»…åœ¨å¼€å‘æ¨¡å¼ä½¿ç”¨ mockï¼ˆå¯é€‰ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶ï¼‰
    if (import.meta.env.DEV && import.meta.env.VITE_USE_MOCK === 'true') {
      console.warn('Using mock data in DEV mode')
      groups.value = mockGroups
      ElMessage.warning('å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®')
    } else {
      // ç”Ÿäº§æ¨¡å¼ï¼šä¿æŒç©ºåˆ—è¡¨ï¼Œå¼ºåˆ¶ç”¨æˆ·ä¿®å¤åç«¯é—®é¢˜
      groups.value = []
    }
  } finally {
    isLoading.value = false
  }
}
```

åŒæ—¶ä¿®æ”¹ `addGroup` æ–¹æ³•ï¼š

```typescript
const addGroup = async (group: Omit<Group, 'id' | 'createdAt' | 'updatedAt' | 'profileCount'>) => {
  try {
    const created = await createGroup({
      name: group.name,
      sort: group.sort,
    })
    groups.value.push(created)
    ElMessage.success('åˆ›å»ºåˆ†ç»„æˆåŠŸ')
    return created
  } catch (err: any) {
    console.error('Failed to create group via API:', err)
    ElMessage.error(err.message || 'åˆ›å»ºå¤±è´¥')
    throw err // æŠ›å‡ºé”™è¯¯ï¼Œä¸å†æœ¬åœ°åˆ›å»º
  }
}
```

#### éªŒæ”¶æ ‡å‡†
- âœ… ç”Ÿäº§ç¯å¢ƒä¸ä½¿ç”¨ mock æ•°æ®
- âœ… å¤±è´¥æ—¶æ˜¾ç¤ºæ˜ç¡®é”™è¯¯
- âœ… å¼€å‘æ¨¡å¼å¯é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨ mock
- âœ… åˆ›å»º/æ›´æ–°å¤±è´¥ä¸ä¼šæœ¬åœ°åˆ›å»ºå‡æ•°æ®

---

### ğŸ§ª ä»»åŠ¡ 1.5ï¼šæµ‹è¯•ä¸éªŒæ”¶

#### æµ‹è¯•ç”¨ä¾‹

**ç”¨ä¾‹ 1: åˆ†ç»„åˆ—è¡¨åŠ è½½**
```
1. å¯åŠ¨åº”ç”¨
2. æ‰“å¼€åˆ†ç»„ç®¡ç†é¡µ
3. éªŒè¯ï¼šåˆ†ç»„åˆ—è¡¨æ¥è‡ªåç«¯ï¼ˆé mockï¼‰
4. éªŒè¯ï¼šæ¯ä¸ªåˆ†ç»„æ˜¾ç¤ºæ­£ç¡®çš„ profileCount
```

**ç”¨ä¾‹ 2: åˆ›å»º Profile é€‰æ‹©åˆ†ç»„**
```
1. ç‚¹å‡»"æ–°å»ºç¯å¢ƒ"
2. åœ¨åˆ†ç»„é€‰æ‹©å™¨ä¸­é€‰æ‹©"æµ‹è¯•åˆ†ç»„"
3. å¡«å†™åç§°å¹¶ä¿å­˜
4. éªŒè¯ï¼šæ–° Profile çš„ group_id ä¸ºæ‰€é€‰åˆ†ç»„çš„ id
5. éªŒè¯ï¼šæ•°æ®åº“ä¸­æ­£ç¡®ä¿å­˜
```

**ç”¨ä¾‹ 3: Dashboard åˆ†ç»„ç­›é€‰**
```
1. åœ¨ Dashboard é€‰æ‹©"æµ‹è¯•åˆ†ç»„"
2. éªŒè¯ï¼šä»…æ˜¾ç¤ºè¯¥åˆ†ç»„çš„ Profile
3. é€‰æ‹©"å…¨éƒ¨åˆ†ç»„"
4. éªŒè¯ï¼šæ˜¾ç¤ºæ‰€æœ‰ Profile
```

**ç”¨ä¾‹ 4: åˆ é™¤éç©ºåˆ†ç»„**
```
1. å°è¯•åˆ é™¤åŒ…å« Profile çš„åˆ†ç»„
2. éªŒè¯ï¼šå‰ç«¯æ˜¾ç¤ºé”™è¯¯æç¤º
3. éªŒè¯ï¼šåç«¯è¿”å›æ˜ç¡®é”™è¯¯
```

**ç”¨ä¾‹ 5: åˆ é™¤ç©ºåˆ†ç»„**
```
1. åˆ é™¤æ‰€æœ‰ Profile ååˆ é™¤åˆ†ç»„
2. éªŒè¯ï¼šå¼¹å‡ºäºŒæ¬¡ç¡®è®¤
3. ç¡®è®¤åéªŒè¯ï¼šåˆ†ç»„åˆ é™¤æˆåŠŸ
4. éªŒè¯ï¼šæ•°æ®åº“ä¸­åˆ†ç»„å·²åˆ é™¤
```

**ç”¨ä¾‹ 6: æ›´æ–°åˆ†ç»„**
```
1. ä¿®æ”¹åˆ†ç»„åç§°
2. éªŒè¯ï¼šåç«¯åŒæ­¥æ›´æ–°
3. éªŒè¯ï¼šä½¿ç”¨è¯¥åˆ†ç»„çš„ Profile ä¸å—å½±å“
```

---

## ğŸ“Š æ€»ä½“å·¥ä½œé‡ä¼°ç®—

| Phase | P0 ä»»åŠ¡ | P1 ä»»åŠ¡ | P2 ä»»åŠ¡ | æ€»è®¡ |
|-------|---------|---------|---------|------|
| **FE-V2-0** | 0.2å¤© | 0.3å¤© | - | 0.5å¤© |
| **FE-V2-1** | 1.4å¤© | 0.5å¤© | - | 1.9å¤© |
| **FE-V2-2** | 0.5å¤© | - | - | 0.5å¤©ï¼ˆéœ€åç«¯ï¼‰ |
| **FE-V2-3** | 0.5å¤© | - | - | 0.5å¤©ï¼ˆéœ€åç«¯ï¼‰ |
| **FE-V2-4** | - | 0.5å¤© | - | 0.5å¤© |
| **FE-V2-5** | - | - | 0.5å¤© | 0.5å¤© |
| **æ€»è®¡** | **2.6å¤©** | **1.3å¤©** | **0.5å¤©** | **4.4å¤©** |

**è¯´æ˜**:
- **P0 ä»»åŠ¡** (2.6å¤©): é˜»å¡äº¤ä»˜ï¼Œå¿…é¡»å®Œæˆ
- **P1 ä»»åŠ¡** (1.3å¤©): ç¨³å®šæ€§å¢å¼ºï¼Œå»ºè®®å®Œæˆ
- **P2 ä»»åŠ¡** (0.5å¤©): ä½“éªŒä¼˜åŒ–ï¼Œå¯å»¶æœŸ

**å‰ç«¯ç‹¬ç«‹å®Œæˆ**: 3.9å¤©ï¼ˆFE-V2-0 + FE-V2-1 + FE-V2-4 + FE-V2-5ï¼‰  
**ä¾èµ–åç«¯**: 1.0å¤©ï¼ˆFE-V2-2 + FE-V2-3ï¼‰

---

## ğŸ¯ V2 Done Definitionï¼ˆéªŒæ”¶æ¸…å•ï¼‰

- [ ] **Group çœŸè”è°ƒï¼ˆP0ï¼‰**
  - [ ] åç«¯ Group Service å°±ç»ªï¼ˆâœ… å·²å®Œæˆï¼‰
  - [ ] å‰ç«¯ä¸ä½¿ç”¨ mock å›é€€ä½œä¸ºé»˜è®¤è·¯å¾„
  - [ ] BasicInfoForm ä½¿ç”¨ el-select é€‰æ‹©åˆ†ç»„
  - [ ] Dashboard å¯æŒ‰åˆ†ç»„ç­›é€‰
  - [ ] åˆ é™¤éç©ºåˆ†ç»„è¢«é˜»æ­¢ï¼ˆå‰ç«¯ + åç«¯ï¼‰
  - [ ] GroupStore.updateGroup è°ƒç”¨åç«¯ API

- [ ] **Fingerprint patch æäº¤ï¼ˆP0ï¼‰**
  - [ ] ç¼–è¾‘æ¨¡å¼æäº¤ fingerprintPatchï¼ˆç™½åå•å­—æ®µï¼‰
  - [ ] åç«¯å®ç° mergeï¼ˆexisting + patchï¼‰
  - [ ] ä¿®æ”¹å­—æ®µåå†å²å­—æ®µä¸ä¸¢å¤±

- [ ] **æ‰¹é‡æ“ä½œåé¦ˆï¼ˆP0ï¼‰**
  - [ ] åç«¯æ‰¹é‡æ¥å£è¿”å›é€é¡¹ç»“æœ
  - [ ] å‰ç«¯å±•ç¤ºæˆåŠŸæ•°/å¤±è´¥æ•°/å¤±è´¥åŸå› 
  - [ ] å¹‚ç­‰ç­–ç•¥æ˜ç¡®ï¼ˆå·²åœ¨è¿è¡Œç®—æˆåŠŸï¼‰

- [ ] **äº‹ä»¶è¡¥é½ï¼ˆP1ï¼‰**
  - [ ] ç›‘å¬ profile:status_changedï¼ˆâœ… å·²å®Œæˆï¼‰
  - [ ] ç›‘å¬ browser:error å¹¶å¼¹å‡ºæç¤º

- [ ] **èŒƒå›´æ˜ç¡®ï¼ˆP0ï¼‰**
  - [ ] tags/proxy/recycle æ ‡è®°"æœªå¼€æ”¾"æˆ–çœŸå®å®ç°

- [ ] **Settings æ–‡ä»¶é€‰æ‹©ï¼ˆP2ï¼‰**
  - [ ] å¯ç”¨ Tauri dialog é€‰æ‹©æ–‡ä»¶/ç›®å½•

---

## ğŸš€ æ¨èæ‰§è¡Œé¡ºåº

### ç¬¬ä¸€æ­¥ï¼šç«‹å³å¼€å§‹ï¼ˆ0.5å¤©ï¼‰
âœ… **ä»»åŠ¡ 1.1 + 1.3 + 1.4**ï¼ˆGroup æ ¸å¿ƒä¿®å¤ï¼‰
- ä¿®å¤ BasicInfoForm ä¸º el-select
- ä¿®å¤ GroupStore.updateGroup è°ƒç”¨ API
- ç§»é™¤ mock å›é€€

### ç¬¬äºŒæ­¥ï¼šåŠŸèƒ½å®Œå–„ï¼ˆ1å¤©ï¼‰
âœ… **ä»»åŠ¡ 1.2 + 1.5 + 0.1**ï¼ˆGroup ç­›é€‰ + æµ‹è¯• + èŒƒå›´æ˜ç¡®ï¼‰
- Dashboard åˆ†ç»„ç­›é€‰
- å®Œæ•´æµ‹è¯• Group åŠŸèƒ½
- æ˜ç¡® tags/proxy/recycle ç­–ç•¥

### ç¬¬ä¸‰æ­¥ï¼šäº‹ä»¶ä¸ä½“éªŒï¼ˆ0.5å¤©ï¼‰
âœ… **ä»»åŠ¡ 4.1**ï¼ˆäº‹ä»¶è¡¥é½ï¼‰
- ç›‘å¬ browser:error

### ç¬¬å››æ­¥ï¼šç­‰å¾…åç«¯ï¼ˆååŒå¼€å‘ï¼‰
â³ **ä»»åŠ¡ 2.1 + 2.2 + 3.1 + 3.2**ï¼ˆFingerprint + æ‰¹é‡ï¼‰
- éœ€è¦åç«¯é…åˆå®ç°

### ç¬¬äº”æ­¥ï¼šå¯é€‰ä¼˜åŒ–ï¼ˆ0.5å¤©ï¼‰
âœ… **ä»»åŠ¡ 5.1**ï¼ˆSettings æ–‡ä»¶é€‰æ‹©ï¼‰
- ä½“éªŒä¼˜åŒ–ï¼Œå¯å»¶æœŸ

---

## ğŸ“ æ€»ç»“

### å½“å‰çŠ¶æ€
- **åç«¯ Group åŠŸèƒ½**: âœ… 100% å®Œæˆ
- **å‰ç«¯ Group åŠŸèƒ½**: â³ 80% å®Œæˆï¼ˆéœ€ä¿®å¤ 4 ä¸ªå°ä»»åŠ¡ï¼‰
- **Fingerprint/æ‰¹é‡/äº‹ä»¶**: â³ 0% å®Œæˆï¼ˆéœ€åç«¯æ”¯æŒï¼‰

### å»ºè®®è¡ŒåŠ¨
1. **ç«‹å³æ‰§è¡Œ**: Phase FE-V2-1ï¼ˆGroup çœŸè”è°ƒä¿®å¤ï¼Œ1.7å¤©ï¼‰
2. **ååŒå¼€å‘**: ä¸åç«¯å¹¶è¡Œå®ç° Fingerprint merge å’Œæ‰¹é‡åé¦ˆ
3. **å»¶æœŸå¤„ç†**: Settings æ–‡ä»¶é€‰æ‹©å¯åœ¨ V3 å®ç°

### é¢„è®¡äº¤ä»˜æ—¶é—´
- **å‰ç«¯ç‹¬ç«‹å®Œæˆ**: 3-4 ä¸ªå·¥ä½œæ—¥
- **å‰åç«¯ååŒ**: 5-6 ä¸ªå·¥ä½œæ—¥ï¼ˆåŒ…å«è”è°ƒï¼‰

**V2 ç›®æ ‡**: ä»"å¯æ¼”ç¤º"å‡çº§ä¸º"çœŸå®æ•°æ®å¯äº¤ä»˜"ï¼Œå»ºè®®åœ¨ **1 å‘¨å†…** å®Œæˆå‰ç«¯ä¾§æ‰€æœ‰ P0 ä»»åŠ¡ã€‚
