<script setup lang="ts">
/**
 * @description ä»ªè¡¨ç›˜ä¸»è§†å›¾ - ç¯å¢ƒåˆ—è¡¨ (æ¡Œé¢åŸç”ŸåŒ–)
 * @author DeepAgent
 */

import { ref, computed, onMounted, inject } from 'vue'
import { useProfileStore } from '@/stores/profile.store'
import { useGroupStore } from '@/stores/groupStore'
import type { Profile } from '@/types/profile.types'
import type { BatchResult } from '@/types'
import ListHeader from './components/ListHeader.vue'
import ProfileRow from './components/ProfileRow.vue'
import ProfileDrawer from '@/features/profile-editor/ProfileDrawer.vue'
import BatchResultDialog from '@/components/BatchResultDialog.vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import { getSettingValue } from '@/api/settingsApi'

// ä½¿ç”¨çª—å£ store
const profileStore = useProfileStore()
const groupStore = useGroupStore()
const navigateTo = inject<(page: string) => void>('navigateTo')

/**
 * æ£€æŸ¥ç³»ç»Ÿè®¾ç½®æ˜¯å¦å®Œæˆ
 * @returns true: å·²è®¾ç½®, false: æœªè®¾ç½®
 */
const checkSystemSettings = async (): Promise<boolean> => {
  try {
    const kernelPath = await getSettingValue('kernel_path')
    if (!kernelPath) {
      const result = await ElMessageBox.confirm(
        'æµè§ˆå™¨å†…æ ¸è·¯å¾„æœªè®¾ç½®ï¼Œæ— æ³•å¯åŠ¨ç¯å¢ƒã€‚æ˜¯å¦å‰å¾€è®¾ç½®é¡µé¢ï¼Ÿ',
        'é…ç½®æç¤º',
        {
          type: 'warning',
          confirmButtonText: 'å‰å¾€è®¾ç½®',
          cancelButtonText: 'å–æ¶ˆ',
        }
      )
      if (result === 'confirm' && navigateTo) {
        navigateTo('settings')
      }
      return false
    }
    return true
  } catch (e: any) {
    // ç”¨æˆ·å–æ¶ˆæ“ä½œ
    if (e === 'cancel') {
      return false
    }
    // å…¶ä»–é”™è¯¯
    ElMessage.error('æ£€æŸ¥ç³»ç»Ÿè®¾ç½®å¤±è´¥')
    return false
  }
}

// ==================== çŠ¶æ€ ====================
const isLoading = ref(false)
const selectedIds = ref<Set<string>>(new Set())
const searchKeyword = ref('')
const filterStatus = ref<string>('all')
const filterGroup = ref<string>('all')  // æ–°å¢ï¼šåˆ†ç»„ç­›é€‰
const sortField = ref('updatedAt')
const sortOrder = ref<'asc' | 'desc'>('desc')

// åˆ†é¡µçŠ¶æ€
const currentPage = ref(1)
const pageSize = ref(10)
const pageSizes = [10, 20, 50, 100]

// æŠ½å±‰çŠ¶æ€
const drawerVisible = ref(false)
const editingProfile = ref<Profile | undefined>(undefined)

// æ‰¹é‡æ“ä½œç»“æœå¯¹è¯æ¡†çŠ¶æ€
const batchResultVisible = ref(false)
const batchResultTitle = ref('')
const batchResultData = ref<BatchResult | null>(null)


// ==================== è®¡ç®—å±æ€§ ====================
const filteredProfiles = computed(() => {
  let result = profileStore.profiles
  
  // çŠ¶æ€ç­›é€‰
  if (filterStatus.value !== 'all') {
    result = result.filter((p: Profile) => p.status === filterStatus.value)
  }
  
  // åˆ†ç»„ç­›é€‰ï¼ˆæ–°å¢ï¼‰
  if (filterGroup.value !== 'all') {
    result = result.filter((p: Profile) => p.group === filterGroup.value)
  }
  
  // å…³é”®è¯æœç´¢
  if (searchKeyword.value) {
    const keyword = searchKeyword.value.toLowerCase()
    result = result.filter((p: Profile) => 
      p.name.toLowerCase().includes(keyword) ||
      p.id.toLowerCase().includes(keyword)
    )
  }
  
  // æ’åº
  result = [...result].sort((a, b) => {
    const aVal = a[sortField.value as keyof Profile]
    const bVal = b[sortField.value as keyof Profile]
    const order = sortOrder.value === 'asc' ? 1 : -1
    if (typeof aVal === 'string' && typeof bVal === 'string') {
      return aVal.localeCompare(bVal) * order
    }
    return ((aVal as number) - (bVal as number)) * order
  })
  
  return result
})

// åˆ†é¡µåçš„æ•°æ®
const paginatedProfiles = computed(() => {
  const start = (currentPage.value - 1) * pageSize.value
  const end = start + pageSize.value
  return filteredProfiles.value.slice(start, end)
})

// æ€»æ¡æ•°
const totalCount = computed(() => filteredProfiles.value.length)

const isAllSelected = computed(() => 
  filteredProfiles.value.length > 0 && 
  filteredProfiles.value.every((p: Profile) => selectedIds.value.has(p.id))
)

// æ‰€æœ‰ç¯å¢ƒåˆ—è¡¨ï¼ˆç›´æ¥å¼•ç”¨ storeï¼‰
const profiles = computed(() => profileStore.profiles)

const runningCount = computed(() => profileStore.runningCount)

// ==================== æ–¹æ³• ====================
const handleSelectAll = (value: boolean) => {
  if (value) {
    filteredProfiles.value.forEach((p: Profile) => selectedIds.value.add(p.id))
  } else {
    selectedIds.value.clear()
  }
}

const handleSelect = (profile: Profile) => {
  if (selectedIds.value.has(profile.id)) {
    selectedIds.value.delete(profile.id)
  } else {
    selectedIds.value.add(profile.id)
  }
}

const handleSort = (field: string) => {
  if (sortField.value === field) {
    sortOrder.value = sortOrder.value === 'asc' ? 'desc' : 'asc'
  } else {
    sortField.value = field
    sortOrder.value = 'asc'
  }
}

const handleLaunch = async (id: string) => {
  // å…ˆæ£€æŸ¥ç³»ç»Ÿè®¾ç½®
  const isSettingOk = await checkSystemSettings()
  if (!isSettingOk) {
    return
  }
  
  try {
    await profileStore.startProfile(id)
    ElMessage.success('å¯åŠ¨æˆåŠŸ')
  } catch (e: any) {
    ElMessage.error(e.message || 'å¯åŠ¨å¤±è´¥')
  }
}

const handleStop = async (id: string) => {
  try {
    await profileStore.stopProfile(id)
    ElMessage.success('åœæ­¢æˆåŠŸ')
  } catch (e: any) {
    ElMessage.error(e.message || 'åœæ­¢å¤±è´¥')
  }
}

const handleEdit = (profile: Profile) => {
  editingProfile.value = profile
  drawerVisible.value = true
}

const handleDelete = async (id: string) => {
  try {
    await ElMessageBox.confirm('ç¡®å®šè¦åˆ é™¤æ­¤ç¯å¢ƒå—ï¼Ÿ', 'åˆ é™¤ç¡®è®¤', {
      type: 'warning',
    })
    await profileStore.deleteProfile(id)
    selectedIds.value.delete(id)
    ElMessage.success('åˆ é™¤æˆåŠŸ')
  } catch (e: any) {
    if (e !== 'cancel') {
      ElMessage.error('åˆ é™¤å¤±è´¥')
    }
  }
}

const handleCreateNew = () => {
  console.log('ğŸŸ¢ [Dashboard] handleCreateNew è¢«è°ƒç”¨')
  console.log('ğŸŸ¢ [Dashboard] editingProfile:', editingProfile.value)
  console.log('ğŸŸ¢ [Dashboard] drawerVisible å½“å‰å€¼:', drawerVisible.value)
  editingProfile.value = undefined
  drawerVisible.value = true
  console.log('âœ… [Dashboard] drawerVisible è®¾ç½®ä¸º:', drawerVisible.value)
}

const handleDrawerSuccess = async () => {
  // åˆ·æ–°åˆ—è¡¨
  await profileStore.fetchProfiles()
}


const handleBatchLaunch = async () => {
  if (selectedIds.value.size === 0) {
    ElMessage.warning('è¯·å…ˆé€‰æ‹©ç¯å¢ƒ')
    return
  }
  
  // å…ˆæ£€æŸ¥ç³»ç»Ÿè®¾ç½®
  const isSettingOk = await checkSystemSettings()
  if (!isSettingOk) {
    return
  }
  
  try {
    const ids = Array.from(selectedIds.value)
    const result = await profileStore.startProfiles(ids)
    
    // æ˜¾ç¤ºç»“æœå¯¹è¯æ¡†ï¼ˆæœ‰å¤±è´¥é¡¹æ—¶å¼¹çª—ï¼Œå…¨éƒ¨æˆåŠŸæ—¶åªæç¤ºï¼‰
    if (result.failureCount > 0) {
      batchResultTitle.value = 'æ‰¹é‡å¯åŠ¨ç»“æœ'
      batchResultData.value = result
      batchResultVisible.value = true
    } else {
      ElMessage.success(`æ‰¹é‡å¯åŠ¨æˆåŠŸï¼ˆ${result.successCount} ä¸ªç¯å¢ƒï¼‰`)
    }
  } catch (e: any) {
    ElMessage.error(e.message || 'æ‰¹é‡å¯åŠ¨å¤±è´¥')
  }
}

const handleBatchStop = async () => {
  if (selectedIds.value.size === 0) {
    ElMessage.warning('è¯·å…ˆé€‰æ‹©ç¯å¢ƒ')
    return
  }
  try {
    const ids = Array.from(selectedIds.value)
    const result = await profileStore.stopProfiles(ids)
    
    // æ˜¾ç¤ºç»“æœå¯¹è¯æ¡†ï¼ˆæœ‰å¤±è´¥é¡¹æ—¶å¼¹çª—ï¼Œå…¨éƒ¨æˆåŠŸæ—¶åªæç¤ºï¼‰
    if (result.failureCount > 0) {
      batchResultTitle.value = 'æ‰¹é‡åœæ­¢ç»“æœ'
      batchResultData.value = result
      batchResultVisible.value = true
    } else {
      ElMessage.success(`æ‰¹é‡åœæ­¢æˆåŠŸï¼ˆ${result.successCount} ä¸ªç¯å¢ƒï¼‰`)
    }
  } catch (e: any) {
    ElMessage.error(e.message || 'æ‰¹é‡åœæ­¢å¤±è´¥')
  }
}

// ==================== ç”Ÿå‘½å‘¨æœŸ ====================
onMounted(async () => {
  // ä»åç«¯åŠ è½½çœŸå®æ•°æ®
  await profileStore.initProfiles()
  // åˆå§‹åŒ–åˆ†ç»„æ•°æ®
  await groupStore.initGroups()
})

// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶
defineExpose({
  handleCreateNew,
})
</script>

<template>
  <div class="dashboard-view">
    <!-- é¡µé¢å†…é€šçŸ¥æ¨ªå¹… -->
        <!-- é€šçŸ¥æ¨ªå¹… - é«˜çº§æ ·å¼ -->
    <div class="page-notification banner-warning">
      <div class="notification-icon-wrapper banner-icon">
        <el-icon><InfoFilled /></el-icon>
      </div>
      <div class="notification-content banner-content">
        <div class="banner-text">
          å½“å‰æ‚¨ä½¿ç”¨çš„æ˜¯å…è´¹ç‰ˆï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ä¸ªäººè´¦å·ç®¡ç†åŠŸèƒ½ï¼Œå‡çº§åå¯ä½¿ç”¨å›¢é˜Ÿåä½œã€äº‘ç«¯åŒæ­¥ç­‰é«˜çº§åŠŸèƒ½
        </div>
      </div>
      <button class="upgrade-btn banner-action">
        <el-icon><Promotion /></el-icon>
        <span>å‡çº§è´¦å·</span>
      </button>
    </div>
    
    <!-- å·¥å…·æ  -->
    <div class="toolbar">
      <div class="toolbar-left">
        <!-- ç»Ÿè®¡ -->
        <div class="stats">
          <span class="stat-item">
            å…± <strong>{{ profiles.length }}</strong> ä¸ªç¯å¢ƒ
          </span>
          <span class="stat-divider"></span>
          <span class="stat-item running">
            <span class="dot"></span>
            è¿è¡Œä¸­ <strong>{{ runningCount }}</strong>
          </span>
        </div>
        
        <!-- ç­›é€‰ -->
        <div class="filter-select">
          <el-select v-model="filterStatus" size="small" style="width: 120px; margin-right: 8px">
            <el-option label="å…¨éƒ¨çŠ¶æ€" value="all" />
            <el-option label="è¿è¡Œä¸­" value="running" />
            <el-option label="å·²åœæ­¢" value="stopped" />
          </el-select>
          
          <!-- åˆ†ç»„ç­›é€‰ï¼ˆæ–°å¢ï¼‰ -->
          <el-select v-model="filterGroup" size="small" style="width: 140px" placeholder="å…¨éƒ¨åˆ†ç»„">
            <el-option label="å…¨éƒ¨åˆ†ç»„" value="all" />
            <el-option
              v-for="group in groupStore.sortedGroups"
              :key="group.id"
              :label="`${group.name} (${group.profileCount || 0})`"
              :value="group.id"
            />
          </el-select>
        </div>
      </div>
      
      <div class="toolbar-right">
        <!-- æ‰¹é‡æ“ä½œ -->
        <div class="batch-actions">
          <button class="batch-btn" @click="handleBatchLaunch">
            <el-icon><VideoPlay /></el-icon>
            <span>æ‰¹é‡å¯åŠ¨</span>
          </button>
          <button class="batch-btn" @click="handleBatchStop">
            <el-icon><VideoPause /></el-icon>
            <span>æ‰¹é‡åœæ­¢</span>
          </button>
        </div>
        
        <!-- æœç´¢ -->
        <div class="search-wrapper">
          <el-icon class="search-icon"><Search /></el-icon>
          <input
            v-model="searchKeyword"
            type="text"
            placeholder="æœç´¢ç¯å¢ƒ..."
            class="search-input"
          />
        </div>
      </div>
    </div>
    
    <!-- åˆ—è¡¨ -->
    <div class="list-container" v-loading="isLoading">
      <ListHeader
        :is-all-selected="isAllSelected"
        :sort-field="sortField"
        :sort-order="sortOrder"
        @select-all="handleSelectAll"
        @sort="handleSort"
      />
      
      <div class="list-body">
        <ProfileRow
          v-for="profile in paginatedProfiles"
          :key="profile.id"
          :profile="profile"
          :is-selected="selectedIds.has(profile.id)"
          @select="handleSelect"
          @launch="handleLaunch"
          @stop="handleStop"
          @edit="handleEdit"
          @delete="handleDelete"
        />
        
        <!-- ç©ºçŠ¶æ€ -->
        <div v-if="!isLoading && filteredProfiles.length === 0" class="empty-state">
          <el-icon class="empty-icon"><Files /></el-icon>
          <p class="empty-text">æš‚æ— çª—å£æ•°æ®</p>
          <button class="empty-action" @click="handleCreateNew">
            <el-icon><Plus /></el-icon>
            <span>åˆ›å»ºæ–°çª—å£</span>
          </button>
        </div>
      </div>
      
      <!-- åˆ†é¡µ -->
      <div v-if="totalCount > 0" class="pagination-container">
        <div class="pagination-info">
          å…± <strong>{{ totalCount }}</strong> æ¡
        </div>
        <el-pagination
          v-model:current-page="currentPage"
          v-model:page-size="pageSize"
          :page-sizes="pageSizes"
          :total="totalCount"
          :pager-count="7"
          layout="sizes, prev, pager, next, jumper"
          background
          size="small"
        />
      </div>
    </div>
    
    <!-- ç¯å¢ƒé…ç½®æŠ½å±‰ -->
    <ProfileDrawer
      v-model:visible="drawerVisible"
      :profile="editingProfile"
      @success="handleDrawerSuccess"
    />
    
    <!-- æ‰¹é‡æ“ä½œç»“æœå¯¹è¯æ¡† -->
    <BatchResultDialog
      v-model:visible="batchResultVisible"
      :title="batchResultTitle"
      :result="batchResultData"
    />
  </div>
</template>

<style scoped lang="scss">
.dashboard-view {
  height: 100%;
  display: flex;
  flex-direction: column;
  background-color: var(--color-bg-primary);
}

// é€šçŸ¥æ¨ªå¹…
.page-notification {
  display: flex;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-notification-bg);
  border-bottom: 1px solid var(--color-border-subtle);
  gap: var(--spacing-md);
  
  .notification-icon-wrapper {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-accent-blue);
    border-radius: var(--radius-full);
    color: white;
    flex-shrink: 0;
    
    .el-icon {
      font-size: 14px;
    }
  }
  
  .notification-text {
    flex: 1;
    color: var(--color-text-secondary);
    font-size: var(--text-base);
    line-height: 1.5;
  }
  
  .upgrade-btn {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    height: 28px;
    padding: 0 var(--spacing-md);
    background: var(--color-accent-blue);
    border: none;
    border-radius: var(--radius-md);
    color: white;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out-quart);
    
    &:hover {
      background: var(--color-accent-blue-hover);
      transform: translateY(-1px);
      box-shadow: var(--shadow-sm);
    }
    
    &:active {
      transform: translateY(0);
    }
    
    .el-icon {
      font-size: 14px;
    }
  }
}

// å·¥å…·æ 
.toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background-color: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border-default);
}

.toolbar-left,
.toolbar-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
}

.stats {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  font-size: var(--text-base);
  color: var(--color-text-secondary);
  
  strong {
    color: var(--color-text-primary);
    font-weight: var(--font-semibold);
  }
  
  .stat-divider {
    width: 1px;
    height: 16px;
    background: var(--color-border-default);
  }
  
  .stat-item.running {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    
    .dot {
      width: 8px;
      height: 8px;
      background-color: var(--color-status-running);
      border-radius: var(--radius-full);
      box-shadow: 0 0 8px var(--color-status-running);
      animation: pulse-dot 2s var(--ease-in-out-cubic) infinite;
    }
  }
}

@keyframes pulse-dot {
  0%, 100% {
    box-shadow: 0 0 8px var(--color-status-running);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 16px var(--color-status-running);
    transform: scale(1.1);
  }
}

.filter-select {
  :deep(.el-select) {
    .el-input__wrapper {
      background-color: var(--color-bg-primary);
      border: 1px solid var(--color-border-default);
      border-radius: var(--radius-md);
      box-shadow: none;
      
      &:hover {
        border-color: var(--color-border-strong);
      }
      
      &.is-focus {
        border-color: var(--color-border-interactive);
      }
    }
  }
}

.batch-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.batch-btn {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  height: 28px;
  padding: 0 var(--spacing-md);
  background: transparent;
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: var(--text-sm);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out-quart);
  
  &:hover {
    background: var(--color-hover-bg);
    border-color: var(--color-border-strong);
    color: var(--color-text-primary);
    transform: translateY(-1px);
  }
  
  &:active {
    transform: translateY(0);
  }
  
  .el-icon {
    font-size: 14px;
  }
}

.search-wrapper {
  display: flex;
  align-items: center;
  width: 200px;
  height: 28px;
  padding: 0 var(--spacing-sm);
  background-color: var(--color-bg-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--radius-md);
  transition: all var(--duration-fast) var(--ease-out-quart);
  
  &:hover {
    border-color: var(--color-border-strong);
  }
  
  &:focus-within {
    border-color: var(--color-border-interactive);
    box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.1);
  }
  
  .search-icon {
    color: var(--color-text-tertiary);
    font-size: 14px;
    flex-shrink: 0;
  }
  
  .search-input {
    flex: 1;
    height: 100%;
    border: none;
    background: transparent;
    color: var(--color-text-primary);
    font-size: var(--text-sm);
    padding: 0 var(--spacing-sm);
    outline: none;
    
    &::placeholder {
      color: var(--color-text-tertiary);
    }
  }
}

// åˆ—è¡¨å®¹å™¨ï¼ˆå¡ç‰‡åŒ–ï¼‰
.list-container {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  margin: var(--spacing-md) var(--spacing-lg);
  
  // âœ… å¡ç‰‡åŒ–æ ·å¼
  background: white;
  border: 1px solid var(--color-border-default); // å¤–è¾¹æ¡†
  border-radius: var(--radius-lg); // 8px åœ†è§’
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); // å¾®å¦™é˜´å½±
}

.list-body {
  flex: 1;
  overflow-y: auto;
  
  // è‡ªå®šä¹‰æ»šåŠ¨æ¡ï¼ˆæ¡Œé¢åŸç”Ÿæ„Ÿï¼‰
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  
  &::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 4px;
    
    &:hover {
      background: rgba(0, 0, 0, 0.25);
    }
  }
}

// ç©ºçŠ¶æ€
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-2xl) 0;
  
  .empty-icon {
    font-size: 48px;
    color: var(--color-text-tertiary);
    margin-bottom: var(--spacing-lg);
  }
  
  .empty-text {
    color: var(--color-text-secondary);
    font-size: var(--text-md);
    margin-bottom: var(--spacing-lg);
  }
  
  .empty-action {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    height: 36px;
    padding: 0 var(--spacing-xl);
    background: var(--color-accent-blue);
    border: none;
    border-radius: var(--radius-md);
    color: white;
    font-size: var(--text-md);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out-quart);
    
    &:hover {
      background: var(--color-accent-blue-hover);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    &:active {
      transform: translateY(0);
    }
  }
}

// åˆ†é¡µï¼ˆå¡ç‰‡å†…éƒ¨ï¼‰
.pagination-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg) var(--spacing-xl);
  border-top: 1px solid var(--color-border-default);
  background-color: #FAFAFA; // æµ…ç°èƒŒæ™¯ï¼ˆåŒºåˆ†äºå†…å®¹åŒºï¼‰
  border-radius: 0 0 var(--radius-lg) var(--radius-lg); // åº•éƒ¨åœ†è§’
  
  .pagination-info {
    color: var(--color-text-secondary);
    font-size: var(--text-sm);
    
    strong {
      color: var(--color-text-primary);
      font-weight: var(--font-semibold);
    }
  }
  
  :deep(.el-pagination) {
    --el-pagination-button-bg-color: var(--color-bg-primary);
    --el-pagination-hover-color: var(--color-accent-blue);
    
    .el-pagination__sizes {
      margin-right: var(--spacing-md);
    }
    
    .el-pager li {
      background: var(--color-bg-primary);
      border: 1px solid var(--color-border-default);
      border-radius: var(--radius-sm);
      margin: 0 2px;
      min-width: 28px;
      height: 28px;
      line-height: 26px;
      
      &:hover {
        color: var(--color-accent-blue);
        border-color: var(--color-accent-blue);
      }
      
      &.is-active {
        background: var(--color-accent-blue);
        border-color: var(--color-accent-blue);
        color: white;
      }
    }
    
    .btn-prev,
    .btn-next {
      background: var(--color-bg-primary);
      border: 1px solid var(--color-border-default);
      border-radius: var(--radius-sm);
      min-width: 28px;
      height: 28px;
      
      &:hover:not(:disabled) {
        color: var(--color-accent-blue);
        border-color: var(--color-accent-blue);
      }
    }
    
    .el-pagination__jump {
      margin-left: var(--spacing-md);
      
      .el-input__wrapper {
        width: 50px;
        height: 28px;
      }
    }
  }
}
</style>
